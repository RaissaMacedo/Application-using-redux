{"ast":null,"code":"import { call, select, put, all, takeLatest } from 'redux-saga/effects'; // middleware\nimport { addReserveSuccess, updateAmountReserve } from './actions';\nimport api from '../../../services/api';\n//generate\n//yield igual o  await\nfunction addToReserve(_ref) {\n  let {\n    id\n  } = _ref;\n  return function* () {\n    const tripExists = yield select(state => state.reserve.find(trip => trip.id === id));\n    if (tripExists) {\n      const amount = tripExists.amount + 1;\n      yield put(updateAmountReserve(id, amount));\n    } else {\n      // fazendo a requisição\n      const response = yield call(api.get, `trips/${id}`);\n      const data = {\n        ...response.data,\n        amount: 1\n      };\n\n      // disparando essa action e passando para o reducer\n      yield put(addReserveSuccess(data));\n    }\n  }();\n}\n// se cliclar 2 vezes e ainda não tiver terminando a primeira requisição\n// ele só vai pegar a ultima requsição\nexport default all([takeLatest('ADD_RESERVE_REQUEST', addToReserve)]);","map":{"version":3,"names":["call","select","put","all","takeLatest","addReserveSuccess","updateAmountReserve","api","addToReserve","_ref","id","tripExists","state","reserve","find","trip","amount","response","get","data"],"sources":["/home/raissa/Documentos/Projetos-dev/REACT/Redux/src/store/modules/reserve/sagas.js"],"sourcesContent":["import { call, select, put, all, takeLatest } from 'redux-saga/effects'; // middleware\nimport { addReserveSuccess, updateAmountReserve } from './actions';\nimport api from '../../../services/api';\n//generate\n//yield igual o  await\nfunction* addToReserve({ id }) {\n  const tripExists = yield select((state) =>\n    state.reserve.find((trip) => trip.id === id),\n  );\n  if (tripExists) {\n    const amount = tripExists.amount + 1;\n    yield put(updateAmountReserve(id, amount));\n  } else {\n    // fazendo a requisição\n    const response = yield call(api.get, `trips/${id}`);\n\n    const data = {\n      ...response.data,\n      amount: 1,\n    };\n\n    // disparando essa action e passando para o reducer\n    yield put(addReserveSuccess(data));\n  }\n}\n// se cliclar 2 vezes e ainda não tiver terminando a primeira requisição\n// ele só vai pegar a ultima requsição\nexport default all([takeLatest('ADD_RESERVE_REQUEST', addToReserve)]);\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,MAAM,EAAEC,GAAG,EAAEC,GAAG,EAAEC,UAAU,QAAQ,oBAAoB,CAAC,CAAC;AACzE,SAASC,iBAAiB,EAAEC,mBAAmB,QAAQ,WAAW;AAClE,OAAOC,GAAG,MAAM,uBAAuB;AACvC;AACA;AACA,SAAUC,YAAYA,CAAAC,IAAA;EAAA,IAAC;IAAEC;EAAG,CAAC,GAAAD,IAAA;EAAA,oBAAE;IAC7B,MAAME,UAAU,GAAG,MAAMV,MAAM,CAAEW,KAAK,IACpCA,KAAK,CAACC,OAAO,CAACC,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACL,EAAE,KAAKA,EAAE,CAAC,CAC7C;IACD,IAAIC,UAAU,EAAE;MACd,MAAMK,MAAM,GAAGL,UAAU,CAACK,MAAM,GAAG,CAAC;MACpC,MAAMd,GAAG,CAACI,mBAAmB,CAACI,EAAE,EAAEM,MAAM,CAAC,CAAC;IAC5C,CAAC,MAAM;MACL;MACA,MAAMC,QAAQ,GAAG,MAAMjB,IAAI,CAACO,GAAG,CAACW,GAAG,EAAG,SAAQR,EAAG,EAAC,CAAC;MAEnD,MAAMS,IAAI,GAAG;QACX,GAAGF,QAAQ,CAACE,IAAI;QAChBH,MAAM,EAAE;MACV,CAAC;;MAED;MACA,MAAMd,GAAG,CAACG,iBAAiB,CAACc,IAAI,CAAC,CAAC;IACpC;EACF,CAAC;AAAA;AACD;AACA;AACA,eAAehB,GAAG,CAAC,CAACC,UAAU,CAAC,qBAAqB,EAAEI,YAAY,CAAC,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}